<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="css/dashboard.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
  <link rel="icon" href="img/icon.png" type="image/png">
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
</head>
<body class="p-5">
    <header>
        <script src="js/index.js"> </script>
        
            <script src="js/auth.js"></script> <!-- Load the external script -->
            <script>
              redirectIfNotLoggedIn();
             </script>
             <div class="navbar d-flex flex-column flex-md-row p-3 bg-body-white fixed-top">
                  <!-- Logo and Navbar Links -->
                  <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-body-emphasis text-decoration-none">
                    <h1 class="logo">mithofoods</h1>
                  </a>
                  <hr>
                  <ul class="nav nav-pills mb-auto text-left flex-md-row">
                    <li class="nav-item">
                      <a href="./dashboard.html" class="nav-link link-body-emphasis ">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"></use></svg>
                        Dashboard
                      </a>
                    </li>
                    <div id="userNav"></div>
                    <li class="nav-item">
                      <a href="./recipe.html" class="nav-link link-body-emphasis  ">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"></use></svg>
                        Recipe
                      </a>
                    </li>
                    <li class="nav-item">
                      <a href="./profile.html" class="nav-link link-body-emphasis present">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"></use></svg>
                        Profile
                      </a>
                    </li>
                    <li class="nav-item mt-5">
                        <svg class="bi pe-none me-2" width="16" height="16"><use xlink:href="#speedometer2"></use></svg>

                      <button class="btn btn-dark nav-link link-body-emphasis" type="button" onclick="logoutUser()">Logout</button>
                    </li>
                  </ul>
                </div>
        
          </header>
          <main >
  
            <div class="w-100 mt-5 pt-5 users" style="overflow: hidden;" >
              <h2 class="mt-5" style="color:  #fa744c; font-weight: 800; font-size: 2rem;">Profile</h2>
    <div class="user-details-container">

<div style="border-radius: 5px;   box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.2); /* Stronger shadow on hover */
 ;"><img src="img/profile.png" alt="profile" style="max-height: 300px;"></div>
<div class="mt-5 pt-1 ">
    <p class="profile_first" style="font-size: 1.5rem;">Profile details</p>

<p class="profile_first">UserId: <span id="username-id" class="user_detail"></span></p>
     

        <p class="profile_first">Name: <span id="username-name" class="user_detail"></span></p>
        <p class="profile_first">Email: <span id="username-email" class="user_detail"></span></p>
        
        <p class="profile_first">Role: <span id="user-role" class="user_detail"></span></p>
        <p id="changePassword"></p>
    </div>
    </div>
</main>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const Logged_user_info = userInfo();
           
           console.log(Logged_user_info);
            
            
            if (Logged_user_info) {
                document.getElementById("username-name").textContent = Logged_user_info.name;
                document.getElementById("username-email").textContent = Logged_user_info.email;
                
                document.getElementById("username-id").textContent = Logged_user_info.id;
                document.getElementById("changePassword").innerHTML=`
        <button class="btn btn-sm btn-outline-light" style="color:#fa744c; border: #fa744c solid 1px;" onclick="redirect_password()">Change Password</button>
                `;
                if(Logged_user_info.role_id ==1){
                    document.getElementById("user-role").textContent = "Super Admin";

                }else if (Logged_user_info.role_id ==2){
                    document.getElementById("user-role").textContent = "Admin";

                }else if (Logged_user_info.role_id ==3){
                    document.getElementById("user-role").textContent = "User";

                }else{
                    document.getElementById("user-role").textContent = "built different";

                }



                
            } else {
                alert("No user details found.");
            }

          
        });
    </script>
    <script>
        CheckNav();
      
      </script>
      <script>
        async function redirect_password(){
        window.location.href = './changepassword.html';


        }
      </script>
</body>
</html>
