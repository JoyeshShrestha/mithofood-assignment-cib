<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Details</title>
  <link rel="icon" href="img/icon.png" type="image/png">

    <link rel="stylesheet" href="css/dashboard.css"> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="js/auth.js"></script> 
</head>
<script src="js/auth.js"></script> 
<script>
    redirectIfNotLoggedIn();
   </script>
<body class="p-5">
    <div class="recipe-details-container">
        <button class="btn btn-outline-primary mb-5" id="back-button">Back to users</button>
        <h1>Change Password</h1>
        <form>
            <input class="mt-4 form-control" type="password" placeholder="New Password" id="new_password" required>
            <div id="button_change"></div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const Logged_user_info = userInfo();

            console.log("Logged User Info: ", Logged_user_info);

            if (Logged_user_info) {
                document.getElementById("button_change").innerHTML = `
                    <button class="btn btn-success mt-4" type="button" id="save-button">Save</button>`;
                
                document.getElementById('save-button').addEventListener('click', function () {
                    const newPassword = document.getElementById('new_password').value;

                    if (!newPassword) {
                        alert("Please enter a new password.");
                        return;
                    }

                    changePassword(Logged_user_info.id);
                });
            } else {
                alert("No logged-in user.");
            }

          
            document.getElementById("back-button").onclick = function() {
                window.history.back();
            };
        });
    </script>

    <script src="js/index.js"></script>
</body>
</html>
